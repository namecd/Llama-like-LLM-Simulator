# 项目结构梳理
easy_simulate.py 这个是我之前已经写的模拟prefill阶段计算的脚本，但是现在的脚本设计比较简单.
计算部分，attention和mlp是独立地、并没有串联到一起。
数据传输的部分也是非常比较简单的实现，只是在模拟数据传输的过程

# 规划
我接下来需要你完善你细节的部分，我的规划如下：
1. 我的本意是模拟，所以我并不需要实际输入的input/token，输入还是用random tensor模拟
2. 我需要你实现kv cache的部分，以便为我接下来的decode阶段的模拟做准备
3. 实现decode的流程，现在有的流程只是支持prefill
4. Attention的部分，在计算时因为要兼顾decode，因此要用kv cache去进行计算
5. MLP/MoE的部分，这里要用attention的结果进行，不要再重新随机矩阵模拟。
6. MoE模块保留现在的作风：我需要一部分专家在cpu上执行，一部分专家在GPU上执行。根据acc来判断那部分在哪里执行
7. MoE的模块加入一个路由选择的过程，用一个线性层模拟计算，但是其结果不对专家选择造成影响（这部分主要是用来模拟计算的开销），专家选择仍然用random
